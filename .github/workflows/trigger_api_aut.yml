name: Trigger Webhook on Push

on:
  push:
    branches:
      - main

jobs:
  trigger_webhook:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Webhook
        uses: distributhor/webhook@v1
        with:
          url: https://api.github.com/repos/postman-xray/dispatches
          method: POST
          contentType: application/json
          secret: ${{ secrets.POSTMAN_XRAY_WEBHOOK_SECRET }}
          body: |
            {
              "event_type": "api-dev-push",
              "client_payload": {
                "repository": "api-dev"
              }
            }
